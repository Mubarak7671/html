(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[9214],{

/***/ 389866:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(109328);__web_req__(397910);__web_req__(798935);globalThis._456c437108d2d2713799e19380be528d = globalThis._456c437108d2d2713799e19380be528d || {};(function(__c) {var nC=__c.nC;var L=__c.L;var TQ;var dAg,fAg,qAg,sAg,rAg,FAg,GAg,HAg,IAg,JAg,KAg,MAg,LAg,OAg,NAg,PAg,eAg,kAg,nAg,mAg,lAg,RAg,SAg,TAg,UAg;dAg=function(a){const b=document.createElement("div");b.style.width="0";b.style.height="0";b.appendChild(a);document.body.appendChild(b);return b};
fAg=function(a,b,c=!1,d=0,e=!1){const f=Error("Error loading video");if(eAg(a))return Promise.reject(f);let g;const h=a.startsWith("blob:"),k=h&&/((iPad|iPhone);.+17_[4-9]|17\.[4-9].+Safari)/i.test(window.navigator.userAgent),m=!k&&b==="video"&&h&&/17\.[3-9].+Safari/i.test(window.navigator.userAgent);let n;return new Promise((p,t)=>{const v=document.createElement(b);!c&&__c.hGc(a)&&(v.crossOrigin="anonymous");const x=()=>{v.removeEventListener("error",B);v.removeEventListener("loadeddata",z);v.removeEventListener("pause",
D);v.removeEventListener("seeked",C);v.removeEventListener("timeupdate",F);n?.remove();clearTimeout(g)},z=()=>{v.removeEventListener("loadeddata",z);v.addEventListener("seeked",C);k||(v.currentTime=d)},B=()=>{x();v instanceof HTMLVideoElement&&e&&__c.kOa(v);t(f)},C=()=>{x();p(v)},D=()=>{v.currentTime=d},F=()=>{v.removeEventListener("timeupdate",F);v.pause()};v.addEventListener("error",B);v.addEventListener("loadeddata",z);v.src=a;v.currentTime=d;k?(v.muted=!0,v.addEventListener("timeupdate",F),v.addEventListener("pause",
D),v instanceof HTMLVideoElement&&(v.playsInline=!0),v.play().catch(B)):v.load();m&&(v.controls=!0,n=dAg(v));g=setTimeout(()=>{v.currentSrc===""&&B()},1E4)})};TQ=__c.TQ=function(a){return new Promise((b,c)=>{const d=new FileReader,e=()=>{d.removeEventListener("error",e);d.removeEventListener("load",f);c(d.error)},f=()=>{d.removeEventListener("error",e);d.removeEventListener("load",f);b(d.result)};d.addEventListener("error",e);d.addEventListener("load",f);d.readAsArrayBuffer(a)})};
__c.gAg=async function(a){a=a instanceof Blob?await TQ(a.slice(0,3)):a.slice(0,3);return a.byteLength>=3&&(0,__c.dGc)(new Uint8Array(a))};__c.hAg=async function(a){a=a instanceof Blob?await TQ(a.slice(0,8)):a.slice(0,8);return a.byteLength>=8&&(0,__c.gGc)(new Uint8Array(a))};__c.iAg=async function(a){a=a instanceof Blob?await TQ(a.slice(0,12)):a.slice(0,12);return a.byteLength<12?!1:(new Uint8Array(a.slice(4,12))).every((b,c)=>b==="ftypavif".charCodeAt(c))};
__c.oAg=async function(a){a=await __c.jAg(a);a=(new DOMParser).parseFromString(a,"image/svg+xml");if(a.querySelector("parsererror"))return!1;var b=a.querySelectorAll("*");a=new Set;for(const d of b){b=d.attributes;var c=d.localName;if(c==null||kAg.includes(c.toLowerCase())||c==="style"&&lAg.test(d.textContent||""))return!1;for(c=0;c<b.length;c++){const e=b[c],f=e.name.toLowerCase(),g=(f==="xlink:href"||f==="href")&&!e.value.startsWith("#")&&!mAg.test(e.value),h=f==="style"&&lAg.test(e.value);if(nAg.includes(f)||
g||h)return!1;if(f==="id"){if(a.has(e.value))return!1;a.add(e.value)}}}return!0};__c.pAg=function({H9:a,M7a:b,locale:c}){c=c&&c!=="en"?`/${c.toLowerCase().replace("-","_")}${"/_upload-widget"}`:"/_upload-widget";return __c.Gg(__c.Bg(__c.Cg(c),{"file-key":a,"onboarding-flow":b}))};qAg=function(){switch(window.location.hostname.replace(/^www\./,"")){case "canva.cn":return 4;case "canva-staging.com":return 1;case "canva-staging.cn":return 3;case "canva-dev.com":case "localhost":return 0;default:return 2}};
sAg=async function(a,b){if(!b)return{error:L("ahM60Q"),type:"unsupported_file_format"};if(a.size>b.Loc)return{error:__c.J("QG6KZA",[b.Loc/1048576]),type:"file_size_too_large"};if(rAg(a,["svg"])&&!await __c.oAg(a))return{error:L("ahM60Q"),type:"unsupported_file_format"}};
__c.tAg=async function(a,{store:b,files:c,fUb:d,M4b:e,KG:f}){b.error=void 0;if(c.length!==0){c=c[0];var g=b.bW&&rAg(c,b.Ytc.$$b)?b.Ytc:b.r3&&rAg(c,b.zkc.$$b)?b.zkc:void 0;g&&a.JJd(b,g.type);g=await sAg(c,g);a.GA(b,g?.error);g?a.oa.J9a(d,{SAa:{state:"DesignWithFileUploadFailed",fileType:c.type,error:g.error,Mf:g.type,M4b:e}}):(a.oa.J9a(d,{SAa:{state:"DesignWithFileUploadStarted",fileType:c.type}}),e=await a.cmf(c),b.fileType==="image"&&a.Kka!==4?window.location.href=a.qPb({H9:e}):a.session?window.location.href=
a.qPb({H9:e}):a.B1b({H9:e,fUb:d,KG:f}))}};rAg=function(a,b){return b.some(c=>a.name.toLowerCase().endsWith(c))};__c.xAg=function(a){const b=UQ(uAg,{Ixd:a.Ixd,Xxd:a.Xxd,YJ:a.YJ,xj:a.xj});return({onClose:c})=>{const d=vAg(()=>{a.onClose?.();c()},[c]);return UQ(__c.Ug,{open:!0,Ta:d,children:({mode:e})=>UQ(__c.rka,{mode:e,mcc:b,KG:wAg})})}};
FAg=async function(a){const b=new TextDecoder;var c=await TQ(a.slice(0,yAg));c=(new DataView(c)).getUint32(24,!0);a=await TQ(a.slice(c));c=new DataView(a);let d=0,e=0,f;for(;d+16<=a.byteLength;){var g=c.getUint32(d,!0),h=c.getUint32(d+4,!0);const m=c.getUint32(d+8,!0);var k=c.getUint32(d+12,!0);d+=16;if(h===zAg&&g===AAg)for(g=0;g<m;g++){h=c.getUint32(d+8,!0);k=c.getUint8(d+12);d+=13;if(k===BAg&&d+h<=a.byteLength){k=new Uint8Array(a.slice(d,d+h));k=b.decode(k);try{const n=JSON.parse(k),p=n.document.artboardCount,
t=n.document.pageCount;e=p>0?p:t}catch(n){throw Error("Failed to parse Affinity file metadata JSON");}}d+=h}else if(h===CAg&&g===AAg)for(g=0;g<m;g++)h=c.getUint32(d+8,!0),k=c.getUint8(d+12),d+=13,k===DAg&&d+h<=a.byteLength&&(f=new Uint8Array(a.slice(d,d+h))),d+=h;else d+=k}if(e===0)throw new EAg;return{ivd:e,$a:f}};GAg=async function(a){a=URL.createObjectURL(a);return nC(a)};
HAg=async function(a){return new Promise(b=>{Number.isFinite(a.duration)?b():(a.currentTime=1E101,a.addEventListener("timeupdate",()=>{a.currentTime=0;b()}))})};IAg=async function(a){a=URL.createObjectURL(a);return await nC(a)};JAg=async function(a){return new Promise((b,c)=>{const d=a.videoWidth,e=a.videoHeight,f=document.createElement("canvas"),g=f.getContext("2d");if(!g)throw Error("Unable to get 2d context");f.width=d;f.height=e;try{g.drawImage(a,0,0,d,e)}catch{}f.toBlob(h=>{h?b(h):c(Error())})})};
KAg=function(...a){a.forEach(b=>{if(typeof b!=="number"||isNaN(b)||b<0)throw Error("Expected a non negative number");})};MAg=async function(a,b,c){try{const d=await LAg(a),e=URL.createObjectURL(d);return await nC(e)}catch(d){return new Image(b,c)}};
LAg=async function(a){const b=document.createElement("div"),c=await __webpack_require__.me(802496),d=(c.default??c).loadAnimation({animationData:a,container:b,renderer:"svg",autoplay:!1,loop:!1,rendererSettings:{progressiveLoad:!0}});a=(await new Promise((e,f)=>{d.addEventListener("DOMLoaded",()=>{const g=b.querySelector("svg");g?e(g):f("Unable to find SVG element")});d.addEventListener("data_failed",f);d.addEventListener("error",f)})).outerHTML;d.destroy();return new Blob([a],{type:"image/svg+xml;charset=utf-8"})};
OAg=async function(a){const b=Date.now(),c=await a.cache.keys();await Promise.all(c.map(async d=>{const e=await a.cache.match(d);e&&NAg(e,b)&&await a.cache.delete(d)}))};NAg=function(a,b){a=a.headers.get("X-Expire");return!!a&&b>=parseInt(a,10)};
PAg={eventType:"marketplace_component_updated",rc(a){return __c.Mb({component_id:a.Nn,page_id:a.Sh,browser_tab_id:a.JZa,component:a.component,marketplace_session_id:a.mz,design_generation_request_id:a.iKb,total_results:a.$B,template_studio_state:a.Ey==null?void 0:__c.rpa(a.Ey),page_search_query:__c.Yd(a.Eub),design_with_file_state:a.SAa==null?void 0:__c.spa(a.SAa),component_results:a.V6c?.map(b=>__c.Mb({result_id:b.cD,doctype_id:b.ua,result_index:b.resultIndex,resource_id:b.resourceId,category_id:b.xa}))})}};
__c.QAg=__c.E(()=>({quota:__c.u(1,__c.B9a)}));__c.rDa.prototype.u5b=__c.ca(76,async function(a){const b=a.oJc;a=await this.Ux.Jna({method:"PUT",url:a.url,body:a.file.content,UF:a.UF});if(a.status<200||a.status>=400)throw new __c.wab(a.body,a.status);return this.getResponseHeader(a,b)});__c.Lf.prototype.J9a=__c.ca(35,function(){});
__c.Mf.prototype.J9a=__c.ca(34,function(a,b){const {ob:c,Nn:d,Vf:e}=a.component??{};this.Lk&&c?this.aa.track(PAg,{Nn:d,Sh:this.Lk.Sh,JZa:this.cba?.JZa,component:c,mz:this.cba?.V9(),$B:b?.$B,Ey:b?.Ey,Eub:this.Lk.cg,SAa:b?.SAa,V6c:b?.V6c,iKb:b?.iKb,Vf:e}):this.D.warning("Insufficient data received to fire a marketplace_component_updated event",{extra:new Map([["page",this.Lk?.page],["pageType",this.Lk?.Nh],["componentName",c],["componentId",d]])})});
eAg=a=>{if(window.__wxjs_environment==="miniprogram"){const b=document.createElement("a");b.href=a;return b.protocol==="blob:"}return!1};__c.jAg=a=>new Promise((b,c)=>{const d=new FileReader,e=()=>{d.removeEventListener("error",e);d.removeEventListener("load",f);c(d.error)},f=()=>{d.removeEventListener("error",e);d.removeEventListener("load",f);b(d.result)};d.addEventListener("error",e);d.addEventListener("load",f);d.readAsText(a)});kAg="altglyph altglyphdef altglyphitem cursor glyph glyphref missing-glyph tref animate animatemotion animatetransform discard mpath set font font-face font-face-format font-face-name font-face-src font-face-uri a foreignobject script switch".split(" ");
nAg="crossorigin lang media onload paint-order ping referrerpolicy rel rendering-intent requiredextensions requiredfeatures systemlanguage unicode transform-origin".split(" ");mAg=/data:image\/[^,;]+;base64,.*/;lAg=/.*(mix-blend-mode|paint-order):.*/;RAg=__webpack_require__(186901);SAg=RAg.EW;TAg=RAg.sH;UAg=RAg.XI;var VAg=__webpack_require__(322594),UQ=VAg.jsx,WAg=VAg.jsxs;var vAg=__webpack_require__(205482).useCallback;__c.XAg=class{static C(a){__c.hb(a,{GA:UAg,JJd:UAg})}GA(a,b){a.error=b}JJd(a,b){a.fileType=b}B1b({H9:a,fUb:b,KG:c}){__c.l(this.qd)({Faa:__c.pAg({H9:a,M7a:"editor",locale:this.locale}),onClose:()=>{this.oa.J9a(b,{SAa:{state:"DesignWithFileUploadFailed",error:"Auth dialog closed",Mf:"AUTH_FAILED"}})},KG:c})}qPb({H9:a}){return __c.pAg({H9:a,M7a:"editor",locale:this.locale})}constructor(a,b,c,d,e,f){this.oa=a;this.session=b;this.locale=c;this.qd=e;this.cmf=f;this.Kka=(__c.XAg.C(this),void 0);this.Kka=
qAg()}};__c.YAg=class{static C(a){__c.hb(a,{error:TAg.ref,fileType:TAg.ref,ZJa:SAg})}get Ytc(){return{type:"image",Loc:26214400,ZJa:["image/jpeg","image/png","image/heic","image/webp","image/svg+xml"],$$b:".jpg .jpeg .png .heic .heif .webp .svg".split(" ")}}get zkc(){return{type:"document",Loc:104857600,ZJa:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],
$$b:[".pdf",".doc",".docx",".ppt",".pptx"]}}get ZJa(){return[...(this.r3?this.zkc.ZJa:[]),...(this.bW?this.Ytc.ZJa:[])]}constructor({r3:a,bW:b}){this.error=(__c.YAg.C(this),void 0);this.r3=a;this.bW=b}};var ZAg=__webpack_require__.p+"images/e9dfaaa6658065cbf1fae20549615281.jpg";var $Ag=({YJ:a,xj:b})=>{a=__c.ov(a??"https://www.canva.com/policies/terms-of-use/");b=__c.ov(b??"https://www.canva.com/policies/privacy-policy/");b=__c.J("O2jY/g",[a,b]);return UQ(__c.N,{size:"small",tone:"secondary",children:UQ(__c.$C,{hfa:"subtle",message:b})})};var wAg=()=>UQ("div",{className:"PlkO4g",style:{backgroundImage:`url('${ZAg}')`}}),uAg=({Ixd:a,Xxd:b,YJ:c,xj:d})=>WAg(__c.Mc,{spacing:"3u",children:[WAg(__c.Mc,{spacing:"2u",children:[UQ(__c.Mi,{children:L("potVOQ")}),UQ(__c.N,{children:L("JD9WQg")})]}),WAg(__c.Mc,{spacing:"2u",children:[UQ(__c.Ae,{variant:"primary",onClick:a,children:L("HOueLw")}),UQ(__c.Ae,{variant:"secondary",onClick:b,children:L("C3rOdg")}),UQ($Ag,{YJ:c,xj:d})]})]});var EAg=class extends Error{constructor(){super("Affinity file does not contain valid metadata");this.name="AffinityInvalidMetadataError"}},aBg=class{async handle(a){const {ivd:b,$a:c}=await FAg(a);if(c!=null){var d=await __c.iGc(new Blob([c],{type:"image/png"}));d=await this.Tra(d)}else d=new Image;return{file:a,img:d,width:d.width,height:d.height,ivd:b}}constructor(){this.Tra=__c.nC}},yAg=32,zAg=1635018061,CAg=1651337300,AAg=4294967295,BAg=1,DAg=1;var bBg=class{handle(a){return __c.iGc(a).then(b=>nC(b)).then(b=>({img:b,file:a,width:b.width,height:b.height}),()=>({img:new Image,file:a}))}};__c.cBg=class{static async yob(a){a=await (typeof a==="string"?nC(a):GAg(a));if(a.src){var b=a.naturalWidth*a.naturalHeight;a=isNaN(b)||b<=0?!1:__c.DFc(a)}else a=!1;return a}async handle(a){const b=await GAg(a);if(!b)throw Error("Failed to load gif");return{img:b,file:a,width:b.naturalWidth,height:b.naturalHeight}}};var dBg=class{async handle(a){const b=URL.createObjectURL(a);try{const c=await fAg(b,"audio");return{img:new Image,file:a,duration:c.duration}}finally{URL.revokeObjectURL(b)}}};var eBg=class{async handle(a){const b=URL.createObjectURL(a);let c;try{c=await fAg(b,"video",!1,void 0,!1)}catch(d){return URL.revokeObjectURL(b),{file:a,img:new Image,Yfd:!0}}await HAg(c);try{const d=c.duration,e=c.videoWidth,f=c.videoHeight;return{img:await JAg(c).then(IAg).catch(()=>new Image),file:a,width:e,height:f,duration:d}}finally{URL.revokeObjectURL(b),c.parentNode?.removeChild(c)}}};var VQ={1:"TOP-LEFT",2:"TOP-RIGHT",3:"BOTTOM-RIGHT",4:"BOTTOM-LEFT",5:"LEFT-TOP",6:"RIGHT-TOP",7:"RIGHT-BOTTOM",8:"LEFT-BOTTOM"},fBg=[VQ[5],VQ[6],VQ[7],VQ[8]],gBg=class extends Error{},hBg=class{async handle(a){var b=await __c.iGc(a);b=await nC(b);var c=await TQ(a);a:{if(!(0,__c.dGc)(new Uint8Array(c)))throw new gBg("Not a JPEG file");try{var d=new DataView(c);for(c=2;c<d.byteLength;){var e=d.getUint16(c,!1);c+=2;if(e===65505){if(d.getUint32(c+=2,!1)!==1165519206)break;var f=d.getUint16(c+=6,!1)===
18761;c+=d.getUint32(c+4,f);var g=d.getUint16(c,f);c+=2;for(let m=0;m<g;m++)if(d.byteLength>c+m*12&&d.getUint16(c+m*12,f)===274){var h=d.getUint16(c+m*12+8,f);break a}}else if((e&65280)!==65280)break;else c+=d.getUint16(c,!1)}}catch(m){if(!(m instanceof RangeError))throw m;}h=1}if(h!==1){a:if(a=b,b=VQ[h],f=a.naturalWidth,g=a.naturalHeight,f*g>16777216)var k=a.src;else if(h=document.createElement("canvas"),d=h.getContext("2d")){e=dAg(a);try{const m=getComputedStyle(a).imageOrientation==="none";m&&
fBg.includes(b)?(h.height=f,h.width=g):(h.width=f,h.height=g);if(m)switch(b){case VQ[2]:d.translate(f,0);d.scale(-1,1);break;case VQ[3]:d.translate(f,g);d.rotate(Math.PI);break;case VQ[4]:d.translate(0,g);d.scale(1,-1);break;case VQ[5]:d.rotate(.5*Math.PI);d.scale(1,-1);break;case VQ[6]:d.rotate(.5*Math.PI);d.translate(0,-g);break;case VQ[7]:d.rotate(.5*Math.PI);d.translate(f,-g);d.scale(-1,1);break;case VQ[8]:d.rotate(-.5*Math.PI),d.translate(-f,0)}d.drawImage(a,0,0,f,g);k=h.toDataURL("image/jpeg",
.92);break a}finally{e.remove()}k=void 0}else k=a.src;b=await nC(k);a=__c.jGc(k)}return{img:b,file:a,width:b.width,height:b.height}}};var iBg=class{async handle(a){try{const b=await __c.jAg(a),c=JSON.parse(b),d=c.w,e=c.h,f=c.fr,g=c.ip,h=c.op;KAg(d,e,f,g,h);return{img:await MAg(c,d,e),file:a,width:d,height:e,duration:(h-g)/f}}catch(b){throw Error("Failed to load lottie");}}};var jBg=(a,b)=>(a=a.getAttribute(b))?parseFloat(a):0,kBg=class{static serialize(a){const b=new XMLSerializer,c=`<?xml version="1.0" standalone="${a.xmlStandalone?"yes":"no"}"?>`,d=a.doctype?b.serializeToString(a.doctype):'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';a=b.serializeToString(a.documentElement);return[c,d,a].join("\n")}async handle(a){a=await __c.jAg(a);a=(new DOMParser).parseFromString(a,"image/svg+xml");{const g=a.querySelector("svg");
if(!g)throw Error("Invalid SVG document");var b=g.viewBox&&g.viewBox.baseVal;if(b&&b.width&&b.height)g.setAttribute("width",""+b.width),g.setAttribute("height",""+b.height);else{b=jBg(g,"x");var c=jBg(g,"y"),d=jBg(g,"width"),e=jBg(g,"height");if(!d||!e){const h=dAg(g);try{var f=g.getBBox();b=b||f.x;c=c||f.y;d=d||f.width;e=e||f.height;a.appendChild(g)}finally{h.remove()}}g.setAttribute("width",""+d);g.setAttribute("height",""+e);g.setAttribute("viewBox",`${b} ${c} ${d} ${e}`)}}a.documentElement.getAttribute("xmlns:xml")===
"http://www.w3.org/XML/1998/namespace"&&a.documentElement.removeAttribute("xmlns:xml");f=kBg.serialize(a);a=`data:image/svg+xml;utf8,${encodeURIComponent(f)}`;a=await nC(a);return{img:a,file:new Blob([f],{type:"image/svg+xml"}),width:a.width,height:a.height}}};__c.lBg=class{static U_a(a){switch(a.split(";")[0]){case "image/jpeg":return new hBg;case "image/svg+xml":return new kBg;case "video/avi":case "video/mp4":case "video/mpeg":case "video/quicktime":case "video/x-matroska":case "video/x-m4v":case "video/webm":return new eBg;case "audio/mp3":case "audio/mpeg":case "audio/webm":case "audio/x-wav":case "audio/wav":case "audio/x-m4a":case "audio/mp4":case "audio/ogg":return new dBg;case "image/gif":return new __c.cBg;case "application/json":return new iBg;
case "application/affinity":return new aBg;default:return new bBg}}};__c.mBg=class{static async create(a){try{const b=await a.caches.open("blobs");return new __c.mBg(b,a)}catch(b){}}oUa(a,b,c,d){d=d?Date.now()+d:void 0;const e=new this.window.Headers;c&&e.set("X-Name",encodeURI(c));d&&e.set("X-Expire",d.toString(10));return this.cache.put(`/${encodeURIComponent(a)}`,new this.window.Response(b,{headers:e}))}async getBlob(a){if((a=await this.cache.match(`/${encodeURIComponent(a)}`))&&!NAg(a,Date.now())){var b=a.headers.get("X-Name");b=b?decodeURI(b):void 0;return{blob:await a.blob(),
name:b}}}async B$c(a){await this.cache.delete(`/${encodeURIComponent(a)}`)}constructor(a,b){this.cache=a;this.window=b;this.window.requestIdleCallback?this.window.requestIdleCallback(()=>OAg(this)):setTimeout(()=>OAg(this),6E4)}};
}).call(globalThis, globalThis._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/93571f20e9df6f14.js.map